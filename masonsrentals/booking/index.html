<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MasonsRentals | Booking</title>
    <link rel="icon" type="image/jpeg" href="../../images/favicon.jpg">
    <link rel="stylesheet" href="../../css/rental.css?v=3">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Outfit:wght@300;400;500;600;700&family=Sora:wght@500;600;700&display=swap" rel="stylesheet">
    <!-- Vercel Web Analytics -->
    <script>
        window.va = window.va || function () { (window.vaq = window.vaq || []).push(arguments); };
    </script>
    <script defer src="/_vercel/insights/script.js"></script>
</head>
<body class="rental-body booking-page">
    <header class="rental-header">
        <div class="rental-container">
            <div class="rental-nav">
                <a class="rental-logo" href="../">
                    <img src="../../images/rental/logo.png" alt="MasonsRentals">
                    <span class="rental-logo__text">Masons Rentals</span>
                </a>
                <nav class="rental-links">
                    <a href="../">Home</a>
                    <a href="../booking/">Booking</a>
                    <a href="../../index.html" class="rental-link--cta" aria-label="Kingz of Twinz main site">
                        <img src="../../images/logo.png" alt="Kingz of Twinz">
                    </a>
                </nav>
            </div>
        </div>
    </header>

    <main>
        <section class="booking-hero">
            <div class="rental-container booking-hero__grid">
                <div class="booking-hero__intro">
                    <h1>Reserve your ride</h1>
                    <p>Complete the form to request your booking. We will confirm availability within minutes.</p>
                    <div class="booking-switch">
                        <button class="booking-switch__btn" data-target="toyota" type="button">Toyota Aqua</button>
                        <button class="booking-switch__btn" data-target="nissan" type="button">Nissan Sylphy</button>
                    </div>
                    <div class="booking-preview">
                        <img class="booking-preview__img booking-preview__img--toyota is-active" src="../../images/rental/car1.png" alt="Toyota Aqua">
                        <img class="booking-preview__img booking-preview__img--nissan" src="../../images/rental/car2.png" alt="Nissan Sylphy">
                    </div>
                    <div class="booking-car">
                        <article class="car-detail car-detail--toyota" data-car="toyota">
                            <div class="car-detail__media">
                                <button class="car-detail__thumb" type="button">
                                    <img src="../../images/rental/1.jpeg" alt="Toyota Aqua front">
                                </button>
                                <button class="car-detail__thumb" type="button">
                                    <img src="../../images/rental/2.jpeg" alt="Toyota Aqua angle">
                                </button>
                                <button class="car-detail__thumb" type="button">
                                    <img src="../../images/rental/3.jpeg" alt="Toyota Aqua side">
                                </button>
                                <button class="car-detail__thumb" type="button">
                                    <img src="../../images/rental/4.jpeg" alt="Toyota Aqua rear">
                                </button>
                            </div>
                            <div class="car-detail__info">
                                <h2>Toyota Aqua</h2>
                                <p>Fuel efficient city hatchback with smooth handling and easy parking.</p>
                                <ul>
                                    <li>Seats: 5</li>
                                    <li>Transmission: Automatic</li>
                                    <li>Luggage: 2 bags</li>
                                    <li>Availability: On request</li>
                                </ul>
                            </div>
                        </article>

                        <article class="car-detail car-detail--nissan" data-car="nissan">
                            <div class="car-detail__media">
                                <button class="car-detail__thumb" type="button">
                                    <img src="../../images/rental/a1.jpeg" alt="Nissan Sylphy front">
                                </button>
                                <button class="car-detail__thumb" type="button">
                                    <img src="../../images/rental/a2.jpeg" alt="Nissan Sylphy angle">
                                </button>
                                <button class="car-detail__thumb" type="button">
                                    <img src="../../images/rental/a3.jpeg" alt="Nissan Sylphy side">
                                </button>
                                <button class="car-detail__thumb" type="button">
                                    <img src="../../images/rental/a4.jpeg" alt="Nissan Sylphy rear">
                                </button>
                            </div>
                            <div class="car-detail__info">
                                <h2>Nissan Sylphy</h2>
                                <p>Comfortable sedan with a smooth ride and roomy cabin for island travel.</p>
                                <ul>
                                    <li>Seats: 5</li>
                                    <li>Transmission: Automatic</li>
                                    <li>Luggage: 2 bags</li>
                                    <li>Availability: On request</li>
                                </ul>
                            </div>
                        </article>
                    </div>
                </div>
                <div class="booking-hero__panel">
                    <form class="booking-form">
                        <label>
                            Pick-up location (Jamaica)
                            <input type="text" list="jamaica-parishes" placeholder="Select parish">
                        </label>
                        <label>
                        Pick-up date
                        <input type="date" id="pickupDate">
                    </label>
                    <label>
                        Return date
                        <input type="date" id="returnDate">
                    </label>
                    <label>
                        Pick-up time
                        <select>
                            <option value="" disabled selected>Select time</option>
                            <option>08:00 AM</option>
                            <option>09:00 AM</option>
                            <option>10:00 AM</option>
                            <option>11:00 AM</option>
                            <option>12:00 PM</option>
                            <option>01:00 PM</option>
                            <option>02:00 PM</option>
                            <option>03:00 PM</option>
                            <option>04:00 PM</option>
                            <option>05:00 PM</option>
                            <option>06:00 PM</option>
                        </select>
                    </label>
                        <label>
                            Drop-off location
                            <input type="text" placeholder="Same as pick-up">
                        </label>
                        <p class="booking-form__note">No deposit, no reservation.</p>
                        <div class="booking-summary" aria-live="polite">
                            <h3>Rental Summary</h3>
                            <p class="booking-summary__line"><span>Vehicle rate:</span> <strong id="rateDisplay">Select a car</strong></p>
                            <p class="booking-summary__line"><span>Days:</span> <strong id="daysDisplay">0</strong></p>
                            <p class="booking-summary__total"><span>Estimated total:</span> <strong id="totalDisplay">JMD 0</strong></p>
                            <p class="booking-summary__note" id="ruleDisplay">3-day minimum on rentals.</p>
                        </div>
                    </form>
                    <button type="button" class="booking-form__cta">Request Booking</button>
                    <div class="booking-rules">
                        <h3>Rental Requirements</h3>
                        <ul>
                            <li>3 Day Minimum On Rentals</li>
                            <li>Must be 21+ or over</li>
                            <li>ID Required</li>
                            <li>Deposit Required</li>
                            <li>Airport Pick Ups</li>
                            <li>DM/Call +18768175209</li>
                        </ul>
                    </div>
                </div>
                <datalist id="jamaica-parishes">
                    <option value="Kingston"></option>
                    <option value="St. Andrew"></option>
                    <option value="St. Thomas"></option>
                    <option value="Portland"></option>
                    <option value="St. Mary"></option>
                    <option value="St. Ann"></option>
                    <option value="Trelawny"></option>
                    <option value="St. James"></option>
                    <option value="Hanover"></option>
                    <option value="Westmoreland"></option>
                    <option value="St. Elizabeth"></option>
                    <option value="Manchester"></option>
                    <option value="Clarendon"></option>
                    <option value="St. Catherine"></option>
                </datalist>
            </div>
        </section>
    </main>

    <div class="car-modal" id="carModal" aria-hidden="true">
        <div class="car-modal__overlay" data-modal-close></div>
        <div class="car-modal__dialog" role="dialog" aria-modal="true" aria-label="Car image">
            <button class="car-modal__close" type="button" data-modal-close aria-label="Close">&times;</button>
            <img class="car-modal__image" src="" alt="">
        </div>
    </div>

    <footer class="rental-footer">
        <div class="rental-container rental-footer__grid">
            <div>
                <img src="../../images/rental/logo.png" alt="MasonsRentals">
                <p>Premium rentals backed by the Kingz of Twinz experience.</p>
            </div>
            <div>
                <h4>Support</h4>
                <p>Bookings@kingzoftwinz.com</p>
                <p>+1 (876) 817-5209</p>
                <p>
                    <a class="rental-social" href="https://www.instagram.com/masonsluxerentalsja/" target="_blank" rel="noopener noreferrer" aria-label="Instagram">
                        <svg viewBox="0 0 24 24" aria-hidden="true" focusable="false">
                            <rect x="3" y="3" width="18" height="18" rx="5" ry="5"></rect>
                            <circle cx="12" cy="12" r="4"></circle>
                            <circle cx="17.5" cy="6.5" r="1.2"></circle>
                        </svg>
                    </a>
                </p>
            </div>
            <div>
                <h4>Office</h4>
                <p>Kingston, Jamaica</p>
                <p>Mon-Fri: 9am - 6pm</p>
            </div>
        </div>
    </footer>

    <script>
        const cards = Array.from(document.querySelectorAll('.car-detail'));
        const buttons = Array.from(document.querySelectorAll('.booking-switch__btn'));
        const rateDisplay = document.getElementById('rateDisplay');
        const daysDisplay = document.getElementById('daysDisplay');
        const totalDisplay = document.getElementById('totalDisplay');
        const ruleDisplay = document.getElementById('ruleDisplay');
        const pickupDate = document.getElementById('pickupDate');
        const returnDate = document.getElementById('returnDate');
        const rates = {
            toyota: 8000,
            nissan: 9000
        };

        const setActiveCar = (name) => {
            cards.forEach(card => {
                card.classList.toggle('is-active', card.dataset.car === name);
            });
            buttons.forEach(btn => {
                btn.classList.toggle('is-active', btn.dataset.target === name);
            });
            const previews = document.querySelectorAll('.booking-preview__img');
            previews.forEach(img => {
                img.classList.toggle('is-active', img.classList.contains(`booking-preview__img--${name}`));
            });
            updateSummary();
        };

        const getCarFromHash = () => {
            const hash = window.location.hash.replace('#', '');
            return hash === 'nissan' ? 'nissan' : 'toyota';
        };

        setActiveCar(getCarFromHash());
        window.addEventListener('hashchange', () => setActiveCar(getCarFromHash()));

        buttons.forEach(btn => {
            btn.addEventListener('click', () => {
                window.location.hash = btn.dataset.target;
            });
        });

        function getActiveCar() {
            return window.location.hash.replace('#', '') === 'nissan' ? 'nissan' : 'toyota';
        }

        function getRentalDays() {
            const start = pickupDate?.value ? new Date(pickupDate.value) : null;
            const end = returnDate?.value ? new Date(returnDate.value) : null;
            if (!start || !end || Number.isNaN(start.getTime()) || Number.isNaN(end.getTime())) {
                return 0;
            }
            const diff = Math.ceil((end - start) / (1000 * 60 * 60 * 24));
            return diff > 0 ? diff : 0;
        }

        function formatMoney(amount) {
            return `JMD ${amount.toLocaleString('en-JM')}`;
        }

        function updateSummary() {
            const car = getActiveCar();
            const rate = rates[car] || 0;
            const days = getRentalDays();
            const minDays = 3;
            const effectiveDays = days && days < minDays ? minDays : days;

            rateDisplay.textContent = rate ? `${formatMoney(rate)} / day` : 'Select a car';
            daysDisplay.textContent = String(days);
            totalDisplay.textContent = rate && effectiveDays ? formatMoney(rate * effectiveDays) : 'JMD 0';

            if (!days) {
                ruleDisplay.textContent = 'Select pick-up and return dates to calculate.';
                return;
            }

            if (days < minDays) {
                ruleDisplay.textContent = `3-day minimum applies. Total shown for ${minDays} days.`;
                return;
            }

            ruleDisplay.textContent = '3-day minimum on rentals.';
        }

        pickupDate?.addEventListener('change', updateSummary);
        returnDate?.addEventListener('change', updateSummary);
        updateSummary();

        const modal = document.getElementById('carModal');
        const modalImage = modal?.querySelector('.car-modal__image');
        const closeTriggers = modal?.querySelectorAll('[data-modal-close]') || [];

        const openModal = (src, alt) => {
            if (!modal || !modalImage) return;
            modalImage.src = src;
            modalImage.alt = alt || 'Car image';
            modal.classList.add('is-open');
            modal.setAttribute('aria-hidden', 'false');
            document.body.style.overflow = 'hidden';
        };

        const closeModal = () => {
            if (!modal) return;
            modal.classList.remove('is-open');
            modal.setAttribute('aria-hidden', 'true');
            document.body.style.overflow = '';
            if (modalImage) {
                modalImage.src = '';
                modalImage.alt = '';
            }
        };

        document.querySelectorAll('.car-detail__thumb img').forEach(img => {
            img.addEventListener('click', () => openModal(img.src, img.alt));
        });

        closeTriggers.forEach(trigger => trigger.addEventListener('click', closeModal));
        window.addEventListener('keydown', (event) => {
            if (event.key === 'Escape' && modal?.classList.contains('is-open')) {
                closeModal();
            }
        });
    </script>
</body>
</html>





